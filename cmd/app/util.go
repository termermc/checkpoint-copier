package main

import "fmt"

// FormatFileSize formats a file size in bytes to a human-readable string.
// Prefers using measurements divisible by powers of 2 (KiB, MiB, etc.).
func FormatFileSize[T ~int | ~uint | ~int64 | ~uint64](size T) string {
	if size < 1024 {
		return fmt.Sprintf("%d B", size)
	} else if size < 1024*1024 {
		return fmt.Sprintf("%.2f KiB", float64(size)/1024)
	} else if size < 1024*1024*1024 {
		return fmt.Sprintf("%.2f MiB", float64(size)/(1024*1024))
	} else if size < 1024*1024*1024*1024 {
		return fmt.Sprintf("%.2f GiB", float64(size)/(1024*1024*1024))
	} else {
		return fmt.Sprintf("%.2f TiB", float64(size)/(1024*1024*1024*1024))
	}
}
